pico-8 cartridge // http://www.pico-8.com
version 42
__lua__

function _init()
	#include .movement.p8
	#include .enemy.p8
	cartdata("dc_capstone")
	player_init()
	spring_init()
	btn_init()
	botinit()
	box_init()
	menuitem(1,"save",function() save() end)
	menuitem(2,"load",function() lload() end)
	menuitem(3,"main menu",function() load("main-menu.p8") end)
	menuitem(4,"debug file on/off",function() debug_any() end)
	menuitem(5,"reset save data",function() r_save() end)
	if dget(12)>0 and dget(12)<2 then
		dset(12,2)
	end
	if dget(13,true) then
		lload()
		dset(13,false)
	end
end

function _update()
	player_update()
	box_update()	
	btn_update(butts,player)
	spring_update(3)
	cam_update()
	player_animate()
end

function _draw()
	cls()
	map(0,0)
	btn_draw(butts)
	spring_draw()
	box_draw()
	spr(player.sp,player.x,player.y,1,1,player.flp)
end

__gfx__
0000000000000000bbbbbbbbbbbbbbbb999999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000003bbbb333333bbbbb9d4444690000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000003333333333333bbb94d446490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000dddd0099933399999a33bb944d64490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000dddddd0a4493aaa6459a3339446d4490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000dcddcd0464464544444543394644d490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000dddddd04445444445455443964444d90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000dddd004544446446454463999999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000bbbbb33300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000bbb3333308eeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000dddd0bb33a999088888e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000ddcdcd333a954608888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00dddd000ddddddd33654444022228800288eee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0dcddcd0ddddddd0344554545dd666665dd666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00dddd0000dddd003644546455555dd655555dd60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000055555555516226150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00dddd00000dd0000000000051622615516226150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0dcddcd0000dd0000000000051622615516226150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0dddddd0000dd0000000000051622615516226150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0dddddd000dddd000000000051622615516226150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00dddd000dddddd00000000051622615516226150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000dd0000dcddcd00000000051622615516226150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000dd00000dddd000000000051622615516226150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000dddd00000dd000dd005566000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000dcddcd000dddd000dddd665055000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000dddddd000dddd0005550000dd0055660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000dddddd00dddddd0dd0055660dddd6d50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000ddd00dddddd00dddddd00dddd665dd0055660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000dcdcd00dddd000dddddd0055500000dddd6d50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ddddddd00dddd000dcddcd0dd000556dd5500660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddd000dd00000dddd000ddddd660dddd6600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000010100000000000000000000000000000100000000000000000000000000000000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
2400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000000000000000000000000120202020202020203000000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000000000000000000000000000000000000000023000000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000000000000000000000000000000000000000024120202020202020203000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
